window.__require=function e(t,s,n){function i(o,c){if(!s[o]){if(!t[o]){var a=o.split("/");if(a=a[a.length-1],!t[a]){var h="function"==typeof __require&&__require;if(!c&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+o+"'")}}var l=s[o]={exports:{}};t[o][0].call(l.exports,function(e){return i(t[o][1][e]||e)},l,l.exports,e,t,s,n)}return s[o].exports}for(var r="function"==typeof __require&&__require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,s){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,s,n,r,a,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(c(s=this._events[e]))return!1;if(i(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),s.apply(this,r)}else if(o(s))for(r=Array.prototype.slice.call(arguments,1),n=(h=s.slice()).length,a=0;a<n;a++)h[a].apply(this,r);return!0},n.prototype.addListener=function(e,t){var s;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(s=c(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var s=!1;function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var s,n,r,c;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(s=this._events[e]).length,n=-1,s===t||i(s.listener)&&s.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(s)){for(c=r;c-- >0;)if(s[c]===t||s[c].listener&&s[c].listener===t){n=c;break}if(n<0)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(s=this._events[e]))this.removeListener(e,s);else if(s)for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],ButtonController:[function(e,t,s){"use strict";cc._RF.push(t,"23926SWq7xA8ZeWpjOArAtA","ButtonController");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{},clickPlay:function(){n.instance.emit("showWindow","play")},clickSetting:function(){n.instance.emit("showWindow","setting")},clickRanking:function(){n.instance.emit("showWindow","ranking")},start:function(){}}),cc._RF.pop()},{mEmitter:"mEmitter"}],game:[function(e,t,s){"use strict";cc._RF.push(t,"95f35QIXIpOw5FKTUv/yUYf","game");var n=0,i=1,r=2,o={posGold:[{x:0,y:0,score:100,scale:1},{x:-400,y:-300,score:100,scale:.5},{x:80,y:-300,score:100,scale:1.5}],posDiamond:[{x:100,y:50,score:200,scale:1},{x:-100,y:-100,score:200,scale:1}],posStone:[{x:-300,y:-200,score:10,scale:1},{x:280,y:-100,score:20,scale:2}],target:100,totalTime:15},c={posGold:[{x:1,y:20,score:100,scale:1},{x:100,y:-300,score:50,scale:.5}],posDiamond:[{x:100,y:-200,score:200,scale:1},{x:-100,y:-100,score:200,scale:1}],posStone:[{x:-300,y:-200,score:10,scale:1},{x:150,y:-100,score:20,scale:2}],target:300,totalTime:10},a={posGold:[{x:300,y:-20,score:100,scale:1},{x:-1,y:-200,score:50,scale:.5}],posDiamond:[{x:200,y:-200,score:200,scale:1},{x:-280,y:-200,score:200,scale:1}],posStone:[{x:-150,y:50,score:10,scale:1},{x:270,y:-150,score:20,scale:2},{x:0,y:0,score:30,scale:2.2}],target:400,totalTime:10},h={posGold:[{x:0,y:20,score:100,scale:1},{x:100,y:-300,score:100,scale:.5},{x:320,y:-50,score:200,scale:1.5}],posDiamond:[{x:100,y:-150,score:200,scale:1},{x:-100,y:-100,score:200,scale:1},{x:-180,y:-250,score:100,scale:.5}],posStone:[{x:-300,y:-200,score:10,scale:1},{x:150,y:-100,score:20,scale:2}],target:500,totalTime:10},l={posGold:[{x:250,y:-70,score:100,scale:1},{x:-100,y:-300,score:50,scale:.75},{x:180,y:-250,score:150,scale:1.5}],posDiamond:[{x:50,y:-150,score:100,scale:1},{x:-150,y:-100,score:100,scale:1}],posStone:[{x:-300,y:-200,score:10,scale:1},{x:0,y:0,score:20,scale:2}],target:600,totalTime:10},u=e("mEmitter");cc.Class({extends:cc.Component,properties:{rope:cc.Node,gold:cc.Prefab,diamond:cc.Prefab,stone:cc.Prefab,hook:cc.Node,listItems:cc.Node,_currentItem:cc.Node,timer:cc.ProgressBar,_totalScore:cc.Float=0,totalScore:cc.Label,target:cc.Label,_isRotate:!0,_rotateSpeed:{default:60,serializable:!1},_lengthSpeed:{default:200,serializable:!1},_standardRopeHeight:{default:50,serializable:!1},_x:0,_y:0,_currentLevel:cc.Float=1,_currentTime:cc.Float,music:cc.AudioSource,ctrmusic:cc.Button,gameOver:cc.Sprite,winGame:cc.Sprite,btnResetGame:cc.Button},initMap:function(){var e;switch(this._currentLevel){case 1:e=o;break;case 2:e=c;break;case 3:e=a;break;case 4:e=h;break;case 5:e=l;break;case 6:this.showWindow(this.winGame)}var t=e,s=t.posGold,n=t.posDiamond,i=t.posStone,r=t.target,u=t.totalTime;this.target.string=r,this._currentTime=u,this.currentMap=e;for(var p=0;p<s.length;p++){var m=cc.instantiate(this.gold);this.listItems.addChild(m),m.getComponent("item").setData(s[p])}for(var d=0;d<n.length;d++){var f=cc.instantiate(this.diamond);this.listItems.addChild(f),f.getComponent("item").setData(n[d])}for(var _=0;_<i.length;_++){var v=cc.instantiate(this.stone);this.listItems.addChild(v),v.getComponent("item").setData(i[_])}this._countDown()},ropeLengthen:function(e){this.ropeState==i?(this.rope.height+=this._lengthSpeed*e,this.hook.x+=this.hook.angle*this._lengthSpeed*e,this.hook.y-=this._lengthSpeed*e,this._x=this.hook.x,this._y=this.hook.y,this.rope.height>=500&&Math.abs(this.hook.x)>=Math.abs(500*this.hook.angle)&&(this.ropeState=r)):this.ropeState==r&&(this.rope.height-=this._lengthSpeed*e,this.hook.y<=this._standardRopeHeight-25&&(this.hook.y+=this._lengthSpeed*e),this.hook.x-=this.hook.angle*this._lengthSpeed*e,this.rope.height<=this._standardRopeHeight&&(this._isRotate=!0,this.ropeState=n,this.rope.height=this._standardRopeHeight,this.node.angle=0,this._currentItem&&(this._currentItem.active=!1,this._totalScore+=this._currentItem.getComponent("item").getScore(),this._currentItem.destroy(),this._currentItem=null,this.totalScore.string=this._totalScore)))},rotateRope:function(e){this._isRotate&&(this.rope.angle>=85?this._rotateSpeed=-this._rotateSpeed:this.rope.angle<=-85&&(this._rotateSpeed=Math.abs(this._rotateSpeed)),this.rope.angle+=this._rotateSpeed*e)},onLoad:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.sendHook,this);var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDebugDraw=!1,u.instance=new u,u.instance.registerEvent("withdrawRope",this.withdrawRope.bind(this)),this.initMap()},_countDown:function(){var e=this;this._currentTime-=1,this.timer.progress=this._currentTime/this.currentMap.totalTime,this._currentTime>0&&setTimeout(function(){e._countDown()},1e3),this.checkIsMapEnd()&&this.nextMap()},nextMap:function(){if(this.listItems.removeAllChildren(),this.rope.height=this._standardRopeHeight,this.hook.x=this.hook.angle*this.rope.height,this.hook.y=-this.rope.height-10,this._totalScore>=this.currentMap.target)this._currentLevel++,this.initMap();else{var e=localStorage.ranking;(e=e?JSON.parse(e):[]).push({username:window.username,score:this._totalScore}),localStorage.ranking=JSON.stringify(e),this.showWindow(this.gameOver),this.console.log("thua")}},showWindow:function(e){this._currentPop=e,e.node.active=!0,e.node.opacity=0,e.node.scale=.2,cc.tween(e.node).to(.5,{scale:1,opacity:255},{easing:"quartInOut"}).start()},resetGame:function(){cc.director.loadScene("game")},checkIsMapEnd:function(){return 0==this.listItems.children.length||this._currentTime<=0},withdrawRope:function(e){this.takeItem(e),this.ropeState=r},takeItem:function(e){switch(e.group){case"gold":case"diamond":case"stone":e.x=0,e.y=0,e.parent=this.hook,this._currentItem=e}},sendHook:function(){this._isRotate=!1,this.ropeState==n&&(this.ropeState=i)},controlMusic:function(){this.music.pause()},start:function(){this.ropeState=n},update:function(e){this.checkIsMapEnd()||(this.rotateRope(e),this.ropeLengthen(e))}}),cc._RF.pop()},{mEmitter:"mEmitter"}],hook:[function(e,t,s){"use strict";cc._RF.push(t,"3a1f55/7uRHva5oFwdwS/P0","hook");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(e,t){cc.log(e.node.group),n.instance.emit("withdrawRope",e.node)}}),cc._RF.pop()},{mEmitter:"mEmitter"}],item:[function(e,t,s){"use strict";cc._RF.push(t,"ef809AQI4RLQJYyrlHAVjps","item"),cc.Class({extends:cc.Component,properties:{type:cc.String,score:cc.Float},getScore:function(){return this.score},setData:function(e){this.node.x=e.x,this.node.y=e.y,this.node.scale=e.scale,this.score=e.score}}),cc._RF.pop()},{}],login:[function(e,t,s){"use strict";cc._RF.push(t,"b691b1aOVxLr7MNNu6WneI4","login"),cc.Class({extends:cc.Component,properties:{username:cc.EditBox},onLoad:function(){},start:function(){},submit:function(){var e=this.username.string;window.username=e,cc.director.loadScene("game")}}),cc._RF.pop()},{}],mEmitter:[function(e,t,s){"use strict";cc._RF.push(t,"fedf6HE19tPBr6KWnzgusPU","mEmitter");var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=e("events"),o=function(){function e(){i(this,e),this._emiter=new r,this._emiter.setMaxListeners(100)}return n(e,[{key:"emit",value:function(){var e;(e=this._emiter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emiter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emiter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emiter.removeListener(e,t)}},{key:"destroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,e.instance=null}}]),e}();o.instance=null,t.exports=o,cc._RF.pop()},{events:1}],main:[function(e,t,s){"use strict";cc._RF.push(t,"bc26cQ72zFI+YeL8/Cjp6ja","main");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.instance=new n},start:function(){}}),cc._RF.pop()},{mEmitter:"mEmitter"}],popupController:[function(e,t,s){"use strict";cc._RF.push(t,"dd8e7/e6AxO86KAzj52931F","popupController");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{play:cc.Sprite,setting:cc.Sprite,ranking:cc.Sprite,_currentPop:null},showWindow:function(e){this._currentPop=e,e.node.active=!0,e.node.opacity=0,e.node.scale=.2,cc.tween(e.node).to(.5,{scale:1,opacity:255},{easing:"quartInOut"}).start()},hideWindow:function(){var e=this;cc.tween(this._currentPop.node).to(.5,{scale:.2,opacity:0},{easing:"quartInOut"}).call(function(){e._currentPop.node.active=!1}).start()},clickPopup:function(e){var t=null;t="play"===e?this.play:"setting"===e?this.setting:this.ranking,this.showWindow(t)},onLoad:function(){n.instance.registerEvent("showWindow",this.clickPopup.bind(this))},start:function(){}}),cc._RF.pop()},{mEmitter:"mEmitter"}],rankItem:[function(e,t,s){"use strict";cc._RF.push(t,"877afHm1nZO2J+l3+QSlAFm","rankItem"),cc.Class({extends:cc.Component,properties:{username:cc.Label,score:cc.Label},setData:function(e){this.username.string=e.username,this.score.string=e.score}}),cc._RF.pop()},{}],ranking:[function(e,t,s){"use strict";cc._RF.push(t,"8d33fjapE9PZr/dLRu+ct9V","ranking"),cc.Class({extends:cc.Component,properties:{rankItem:cc.Prefab,listContent:cc.Node},onLoad:function(){this.renderData()},start:function(){},renderData:function(){var e=this,t=localStorage.ranking;t&&((t=(t=(t=JSON.parse(t)).sort(function(e,t){return+e.score>+t.score?-1:1})).slice(0,9)).forEach(function(t,s){console.log(t);var n=cc.instantiate(e.rankItem);n.getComponent("rankItem").setData(t),n.y=-100-50*s,e.listContent.addChild(n)}),this.listContent.height=50*t.length+100)}}),cc._RF.pop()},{}],setting:[function(e,t,s){"use strict";cc._RF.push(t,"bb7f7Ka1WtD/pq8TSrjlTs/","setting");e("mEmitter");cc.Class({extends:cc.Component,properties:{ctrmusic:cc.Toggle,music:cc.AudioSource},controlMusic:function(){0==this.ctrmusic.isChecked?this.music.pause():this.music.play()},start:function(){}}),cc._RF.pop()},{mEmitter:"mEmitter"}]},{},["game","hook","item","ButtonController","login","main","popupController","rankItem","ranking","setting","mEmitter"]);